<!DOCTYPE html>

<html lang="en">
<meta charset="UTF-8">

<head>


  <link rel='stylesheet' href='stock.css'>

</head>

<body>


   <input type='text'placeholder="Search...">
    <button id='deletebutton'>+</button>
  <i class="fa fa-search" id='searchicon'></i>
<div id='parent_of_canvas'>
    <div class='loader'></div>
  <canvas id="chart"></canvas>
   </div>

    <div id='info_price'></div>
    <div id='info_date'></div>
    <div id='customToolTip'></div>
    <div id='price'>

      <span id='dollar'><span class='small_loader' style='position: absolute;left: 15%'></span></span>
      <span id='percent'></span><br>
    </div>
    </div>
    <div id='range'>
      <button id='one_day'>1D</button>
      <button id='one_week'>1W</button>
      <button id='one_month'>1M</button>
       <button id='two_month'>2M</button>
       <button id='three_month'>3M</button>
        <button id='six_month'>6M</button>
      <button id='all_time'>All</button>
    </div>

<script src="https://use.fontawesome.com/523d8f4491.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script id='worker1' type='javascript/worker'>
fetch()
self.onmessage = function(e) {
  start_fetching_data().then(function(result){
    self.postMessage(result)


  });
    self.postMessage('msg from worker');
  };

function start_fetching_data(){
  return fetch('https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol=AAPL&outputsize=full&apikey=FXLQF9OPEP8ROBMD')
  .then(res=> res.json())
  .then(data =>{
   const all_data =data["Time Series (Daily)"]    


    const organized_data = []
    
 Object.keys(all_data).forEach((info,index)=>{
  console.log('what')
      organized_data.push({
        "date":info,
        "price":all_data[info]["4. close"],
         "volume":all_data[info]["5. volume"]
      })
       
     })
     console.log(organized_data)
      return organized_data;
  
  

    })
    


    
  
}

</script>
 
<script src='stock.js'></script>


</body>

</html>
